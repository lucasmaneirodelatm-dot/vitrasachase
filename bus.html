<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Bus â€” VITRASA CHASE</title>
<style>
 body{font-family:Arial,Helvetica,sans-serif;background:#f3f6f9;color:#0b1220;margin:0;padding:18px}
 .wrap{max-width:900px;margin:12px auto;background:#fff;padding:16px;border-radius:10px;box-shadow:0 8px 20px rgba(0,0,0,0.06)}
 h1{margin:0}
 .next{margin-top:12px;padding:10px;border-radius:8px;background:#f7fbff;border:1px solid #e6f0fb;display:flex;justify-content:space-between;align-items:center}
 button.primary{background:#0b74d8;color:#fff;padding:8px 12px;border-radius:8px;border:0;cursor:pointer}
 .muted{color:#6b7785}
</style>
</head>
<body>
  <div class="wrap">
    <h1 id="lineTitle">LÃ­nea â€” Cargando...</h1>
    <div class="muted" id="busId">Bus: â€”</div>

    <div class="next" id="nextStopBox">
      <div>
        <div class="muted">PrÃ³xima parada</div>
        <div id="nextStop" style="font-weight:700">â€”</div>
      </div>
      <div>
        <div class="muted">ETA</div>
        <div id="eta">â€”</div>
      </div>
    </div>

    <div style="margin-top:12px;display:flex;gap:8px;align-items:center">
      <button class="primary" onclick="ring()">ðŸ”” Timbre (bajar)</button>
      <div class="muted">Pulsa para avisar que quieres bajar en la prÃ³xima parada.</div>
    </div>

    <h3 style="margin-top:18px">Pasajeros</h3>
    <ul id="passengers"></ul>
  </div>

<script>
/* lectura de params */
const params = Object.fromEntries(new URLSearchParams(location.search));
const mode = params.mode || 'local';
const name = params.j1 || params.j || 'Jugador';

/* ejemplo de inicializaciÃ³n: mostrar linea / busId */
document.getElementById('lineTitle').textContent = params.role ? `(${params.role}) VITRASA CHASE - ${params.j1||'Jugador'}` : 'VITRASA CHASE';
document.getElementById('busId').textContent = 'Bus: sim-001';

/* simulaciÃ³n simple de prÃ³ximas paradas */
const fakeStops = ['Praza de AmÃ©rica','Avda. da Gran VÃ­a','RÃºa de Pizarro','Praza de EspaÃ±a','EstaciÃ³n Intermodal'];
let idx = 0;
function updateNext(){
  document.getElementById('nextStop').textContent = fakeStops[idx%fakeStops.length];
  document.getElementById('eta').textContent = (Math.max(10 - idx*2, 1)) + ' s';
  renderPassengers();
  idx++;
}
function renderPassengers(){
  const ul = document.getElementById('passengers');
  ul.innerHTML = '';
  const count = 2 + Math.floor(Math.random()*6);
  for(let i=0;i<count;i++){
    const li = document.createElement('li');
    li.textContent = `Pasajero ${i+1}${i===0?' (tu)':''}`;
    ul.appendChild(li);
  }
}
function ring(){
  alert('Has pulsado el timbre. Se avisarÃ¡ al conductor (simulaciÃ³n).');
  // AquÃ­ podrÃ­as reproducir audio: "PrÃ³xima parada" + nombre de la parada
}

setInterval(updateNext, 4500);
updateNext();
</script>
</body>
</html>
