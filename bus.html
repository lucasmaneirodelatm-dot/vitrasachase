cat > bus.html <<'EOF'
<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>VITRASA CHASE ‚Äî Parada / Bus</title>
<style>
  body{margin:0;font-family:Arial,Helvetica,sans-serif;background:#f6f8fb;color:#0b1220}
  header{background:#06213a;color:#fff;padding:16px;text-align:center}
  .wrap{max-width:980px;margin:18px auto;padding:16px}
  .card{background:#fff;border-radius:12px;padding:16px;box-shadow:0 6px 22px rgba(10,20,40,0.08)}
  .row{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
  .stop-info{flex:1}
  .arrival{font-weight:700;color:#0b7bd6}
  .arrival.now{color:#d9534f}
  .btn{padding:10px 14px;border-radius:10px;border:none;background:#0b7bd6;color:#fff;cursor:pointer}
  .btn.ghost{background:transparent;border:1px solid #cfdff1;color:#0b1220}
  #map{height:300px;border-radius:8px;background:#e6eef8;display:flex;align-items:center;justify-content:center;color:#2b4f6f}
  .players{margin-top:10px;font-size:13px;color:#46697f}
</style>
</head>
<body>
<header><img src="https://raw.githubusercontent.com/lucasmaneirodelatm-dot/vitrasachase/refs/heads/main/logo_vitrasa.png" style="height:40px;vertical-align:middle"> VITRASA CHASE</header>
<div class="wrap">
  <div class="card">
    <div class="row">
      <div class="stop-info">
        <div style="font-size:18px;font-weight:700" id="stop-name">Parada ‚Äî Ejemplo</div>
        <div style="margin-top:6px" id="stop-lines">L√≠neas: C1, 4A, 5B</div>
      </div>
      <div style="text-align:right">
        <div style="font-size:12px;color:#556b7f">Pr√≥xima llegada</div>
        <div id="next-arrival" class="arrival">1 min</div>
        <div style="margin-top:8px">
          <button id="btn-coger" class="btn" style="display:none">üöè Coger</button>
          <button id="btn-no-coger" class="btn ghost" style="display:none">No coger</button>
        </div>
      </div>
    </div>

    <div id="map" style="margin-top:12px">[MAPA: ubicaci√≥n jugador A y B]</div>

    <div class="players">Jugadores aqu√≠: <span id="players-list">T√∫ (Fugitivo)</span></div>
  </div>

  <div style="margin-top:12px;text-align:center">
    <button class="btn ghost" id="back">‚¨Ö Volver al men√∫</button>
  </div>
</div>

<script src="logic.js"></script>
<script>
/* bus UI behavior */
document.addEventListener('DOMContentLoaded', async () => {
  // read query params to fill page
  const q = new URLSearchParams(location.search);
  const mode = q.get('mode') || 'local';
  const name = q.get('name') || q.get('j1') || 'Jugador';
  const role = q.get('role') || 'fugitivo';
  document.getElementById('players-list').textContent = name + ' (' + role + ')';

  // sample stop info (in real app lo cargar√°s desde paradas.json)
  const stop = {
    id: q.get('stop') || '6940',
    name: q.get('stopName') || 'Praza de Am√©rica (ejemplo)',
    lines: q.get('lines') || 'C1, 4A, 5B'
  };
  document.getElementById('stop-name').textContent = stop.name;
  document.getElementById('stop-lines').textContent = 'L√≠neas: ' + stop.lines;

  // simulate arrival status using helper from logic.js
  window.onArrivalChange = (status) => {
    const el = document.getElementById('next-arrival');
    el.textContent = status.label;
    el.className = 'arrival' + (status.isNow ? ' now' : '');
    // show "Coger" button only when status.isNow === true
    document.getElementById('btn-coger').style.display = status.isNow ? 'inline-block' : 'none';
    document.getElementById('btn-no-coger').style.display = status.isNow ? 'inline-block' : 'none';
  };

  // start simulation (logic.js provides simulateArrivals)
  window.simulateArrivals && window.simulateArrivals(stop.id);

  // button actions
  document.getElementById('btn-coger').addEventListener('click', async () => {
    // play boarding locuci√≥n + stop audio
    await window.playLocucion('locucion_proxima_parada.mp3'); // universal locuci√≥n
    await window.playStopAudio(stop.id); // stop audio from audios.json if present
    alert('Has subido al bus (simulaci√≥n). Ahora el bus seguir√° su recorrido.');
  });

  document.getElementById('btn-no-coger').addEventListener('click', () => {
    alert('No cogiste el bus. El bus seguir√° a la siguiente parada (simulado).');
  });

  document.getElementById('back').addEventListener('click', () => history.back());
});
</script>
</body>
</html>
