<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Parada</title>
<link rel="stylesheet" href="styles.css">
</head>
<body>

<h2 id="paradaTitulo">Parada</h2>

<div id="busList"></div>

<button id="btnCaminar" class="btn2">ðŸš¶ Caminar a otra parada</button>

<script>

/* Recibir eventos de la sala */
window.addEventListener("message", e => {
  const { tipo, data } = e.data;

  if (tipo === "INIT_PARADA"){
    document.getElementById("paradaTitulo").textContent =
      "Parada " + data.id;

    const cont = document.getElementById("busList");
    cont.innerHTML = "";

    data.buses.forEach(b => {
      const div = document.createElement("div");
      div.className = "bus";

      div.innerHTML = `
        <strong>${b.linea}</strong> â€” ${b.eta}
        <button class="btnCoger" data-id="${b.id}" data-linea="${b.linea}">
          ðŸšŒ Coger
        </button>
      `;

      cont.appendChild(div);
    });

    document.querySelectorAll(".btnCoger").forEach(btn=>{
      btn.onclick = ()=>{
        parent.postMessage({
          tipo:"COGER_BUS",
          data:{ busId:btn.dataset.id, linea:btn.dataset.linea }
        },"*");
      };
    });
  }

  if (tipo === "CAMINANDO"){
    document.getElementById("paradaTitulo").textContent =
      "Caminando a la paradaâ€¦";
  }
});
  <!-- parada.html (fragmento) -->
<script>
const params = new URLSearchParams(window.location.search);
const stopId = params.get('stop'); // ejemplo: 6940
if (!stopId) {
  document.body.innerHTML = '<p>Error: falta parÃ¡metro stop</p>';
} else {
  // funciÃ³n que carga datos de la parada
  loadParada(stopId);
}
function loadParada(id){
  // peticiones a paradas.json o mostrar datos simulados
  fetch('/paradas.json').then(r=>r.json()).then(j=>{
    const p = j[id] || {nombre:'Parada desconocida'};
    document.getElementById('paradaName').textContent = p.nombre;
    renderBusListForParada(id);
  });
}
<script>


/* CAMINAR A OTRA PARADA */
document.getElementById("btnCaminar").onclick = ()=>{
  const destino = prompt("ID de la parada a la que quieres caminar:");
  if (!destino) return;

  parent.postMessage({
    tipo:"CAMINAR_A",
    data:{ destino }
  },"*");
};

</script>
</body>
</html>
